# 풀 라우트 캐시

특정 라우트(페이지)의 전체 HTML을 빌드 타임에 캐싱하여, 동일한 요청에 대해 서버가 다시 렌더링하지 않고 캐시된 결과를 반환하는 기능
SSG([정적 사이트 생성](/computer-science/rendering/렌더링%20방식.md#3-정적-사이트-생성-ssg))방식과 유사하다.

## Static / Dynamic 페이지

Dynamic 페이지로 설정되는 기준

1. 캐시되지 않는 Data Fetching을 사용할 경우
2. 동적 함수(쿠키, 헤더, 쿼리스트링)을 사용하는 컴포넌트가 있을 때

| 동적 함수 | 데이터 캐시 | 페이지 분류  |
| --------- | ----------- | ------------ |
| Yes       | No          | Dynamic      |
| Yes       | Yes         | Dynamic      |
| No        | No          | Dynamic      |
| No        | Yes         | Static (FRC) |

- 동적 함수(예: cookies(), headers(), useSearchParams() 등)을 사용하면 무조건 Dynamic Page
- 동적 함수가 없고 fetch 캐시가 가능(force-cache or revalidate)인 경우에만 Static Page로 분류 -> 이 경우 Full Route Cache 자동 적용

## Revalidate 옵션

fetch메서드를 사용할 경우 revalidate 타임을 설정하면 특정 시간 경과 후 STALE 상태로 표시, 그 다음 Revalidate Data를 세팅하여 다음 요청에서 보여준다. ([ISR](/computer-science/rendering/렌더링%20방식.md#4-점진적-정적-재생성-isr) 방식과 유사함)

## generateStaticParams

- SSG/ISR 방식을 적용할 때,
  - 어떤 다이나믹 파라미터 값들로 페이지를 미리 생성할지
  - generateStaticParams 함수를 통해 정의할 수 있음
- 해당 페이지는 Static Page로 강제 적용된다.

```jsx
export async function generateStaticParams() {
  return [{ id: '1' }, { id: '2' }, { id: '3' }];
}
```

빌드타임에 렌더링이 완료되어 서버측에 Full Route Cache로서 보관된다.
명시되지 않은 페이지는 실시간으로 dynamic하게 페이지가 만들어진다.

## dynamicParams

만약 페이지에 `export const dynamicParams = false;` 설정을 하면, `generateStaticParams`에 명시되지 않은 페이지는 404 페이지로 처리된다.
