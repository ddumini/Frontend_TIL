# 데이터 캐시

- fetch 메서드를 활용해 불러온 데이터를 Next 서버에서 보관하는 기능
- 영구적으로 데이터를 보관하거나, 특정 시간을 주기로 갱신 시키는 것도 가능
- 불필요한 데이터 요청의 수를 줄여서 웹 서비스의 성능을 크게 개선할 수 있음

## 모든 fetch 로깅 설정

```jsx
const nextConfig = {
  logging: {
    fetches: {
      fullUrl: true,
    },
  },
};
```

## Fetch 캐시 옵션

fetch 메서드의 두 번째 인자에 캐시 옵션을 전달

1. {cache: no-store}
   - 데이터를 캐싱 하지 않음 (15버전부터 기본 값)
   - 서버측 콘솔(터미널)에 (cache skip) 표시
2. {cache: force-cache}
   - 요청의 결과를 무조건 캐싱함
   - 한 번 호출된 이후에는 다시 호출하지 않음
3. {next: {revalidate: 3}}
   - 특정 시간을 주기로 캐싱함
   - 마치 Page Router의 [ISR](/computer-science/rendering/렌더링%20방식.md#4-점진적-정적-재생성-isr) 방식과 유사함
4. {next: {tags: ['a']}}
   - On-Demand Revalidate
   - 요청이 들어왔을 때 데이터를 최신화 함

# 리퀘스트 메모이제이션

중복된 API 요청을 캐싱해서 한 번만 요청할 수 있도록 하는 데이터 페칭 최적화전략으로 별도 설정 없이 Next.js에서 자동으로 적용된다.

이는 앱라우터 버전에서 서버 컴포넌트 도입 및 변경된 데이터 페칭 방식으로 생겨난 기능이다. (서로 다른 컴포넌트에서 동일한 데이터를 필요로 할 경우)

실제로 서버측 콘솔에서 확인해보면 동일한 데이터일 경우 한 번만 호출되는 것을 확인할 수 있다.
